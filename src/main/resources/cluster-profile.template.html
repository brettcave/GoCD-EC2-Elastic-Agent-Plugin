<!--
  ~ Copyright 2017 ThoughtWorks, Inc.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~
  ~ This file incorporates changes by @continuumsecurity
  -->

<!--
This page contains the view for your settings.
Ensure that the keys you use are also declared in the GetPluginConfigurationExecutor class
-->

<div data-plugin-style-id="ea-plugin">
    <style>
        [data-plugin-style-id="ea-plugin"] fieldset {
            padding:          20px;
            background-color: transparent;
            margin-bottom:    20px;
            border:           1px solid #ddd;
        }

        [data-plugin-style-id="ea-plugin"] fieldset legend {
            font-size:        0.875rem;
            background-color: #fff;
            padding:          5px;
        }
    </style>

    <div class="form_item_block">
        <label>Go Server URL (this is passed to the agents, so don't use <code>localhost</code>):<span class='asterix'>*</span></label>
        <input type="text" ng-model="go_server_url" ng-required="true"/>
        <span class="form_error" ng-show="GOINPUTNAME[go_server_url].$error.server">{{GOINPUTNAME[go_server_url].$error.server}}</span>
    </div>

    <fieldset>
        <legend>Agent configuration</legend>
        <div class="form_item_block">
            <label>Agent auto-register Timeout (in minutes)<span class='asterix'>*</span></label>
            <input type="text" ng-model="auto_register_timeout" ng-required="true"/>
            <span class="form_error" ng-show="GOINPUTNAME[auto_register_timeout].$error.server">{{GOINPUTNAME[auto_register_timeout].$error.server}}</span>
        </div>

        <div class="form_item_block">
            <label>Maximum EC2 elastic agents to run at any given point in time:<span class='asterix'>*</span></label>
            <input type="text" ng-model="max_elastic_agents" ng-required="true"/>
            <span class="form_error" ng-show="GOINPUTNAME[max_elastic_agents].$error.server">{{GOINPUTNAME[max_elastic_agents].$error.server}}</span>
        </div>
    </fieldset>

    <fieldset>
        <legend>AWS account configuration (Setting Key ID / Secret here will override default provider chain)</legend>
        <div class="form_item_block">
            <label>AWS access key ID:</label>
            <input type="text" ng-model="aws_access_key_id" ng-required="false"/>
            <span class="form_error" ng-show="GOINPUTNAME[aws_access_key_id].$error.server">{{GOINPUTNAME[aws_access_key_id].$error.server}}</span>
        </div>

        <div class="form_item_block">
            <label>AWS secret access key:</label>
            <input type="password" ng-model="aws_secret_access_key" ng-required="false"/>
            <span class="form_error" ng-show="GOINPUTNAME[aws_secret_access_key].$error.server">{{GOINPUTNAME[aws_secret_access_key].$error.server}}</span>
        </div>

        <div class="form_item_block">
            <label>Region:<span class='asterix'>*</span></label>
            <input type="text" ng-model="aws_region" ng-required="true" maxlength="20"/>
            <span class="form_error" ng-show="GOINPUTNAME[aws_region].$error.server">{{GOINPUTNAME[aws_region].$error.server}}</span>
        </div>
    </fieldset>
</div>